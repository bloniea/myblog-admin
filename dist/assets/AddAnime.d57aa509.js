import{L as q}from"./fetch.ddd67e48.js";/* empty css                           *//* empty css                     *//* empty css                  *//* empty css                   */import{i as g,h as K,j as L,Y as R,Z as S,A as $,B as j,r as M,m as T,D as H,a2 as J,o as _,I as D,a as t,w as o,u as a,ac as O,J as u,M as P,N as Q,L as W,a7 as Y,c as I,W as Z,K as c,P as G,Q as X,ag as ee,R as te}from"./vendor.9ce32bbf.js";import{_ as ae}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.83ef3299.js";const k=v=>(G("data-v-3cd821c3"),v=v(),X(),v),le={class:"add-anime"},oe=c("\u9996\u9875"),se=c("\u5A31\u4E50\u7BA1\u7406"),ne=c("\u52A8\u6F2B\u5217\u8868"),de=c("\u6DFB\u52A0\u52A8\u6F2B"),ue=["src"],re={class:"tags"},me={class:"tag-list"},ie={class:"tag-list"},ce=k(()=>u("span",null,"\u89C6\u9891:",-1)),pe={class:"tag-list"},_e=k(()=>u("span",null,"ass\u5B57\u5E55:",-1)),fe={class:"tag-list"},ge=k(()=>u("span",null,"vtt\u5B57\u5E55:",-1)),ve=c(" \u6DFB\u52A0\u96C6\u6570 "),Ve=c("\u7ACB\u5373\u521B\u5EFA"),De=c("\u91CD\u7F6E"),he={setup(v){const h=g(),b=g(!1),C=K(),e=L({addData:{name:"",generalize:"",content:[],img_url:"",fonts:""},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898",trigger:"blur"}],generalize:[{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u5BB9",trigger:"change"}],content:[{required:!0,message:"\u8BF7\u8F93\u5165\u96C6\u6570",trigger:"blur"}],img_url:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",trigger:"blur"}]}}),U=g(null),f=g(""),y=g(!1),w=()=>{y.value=!0,ee(()=>{U.value.focus()})},B=m=>{e.addData.content.splice(e.addData.content.indexOf(m),1)},z=()=>{if(f.value){const m={title:f.value,episode:"",ass:"",vtt:""};e.addData.content.push(m)}y.value=!1,f.value=""},E=async m=>{!m||m.validate(async l=>{if(l){b.value=!0;const i=await q(e.addData);i.status==200&&i.ok&&(C.push({name:"Anime"}),te.success("\u6DFB\u52A0\u6210\u529F")),b.value=!1}})};return(m,l)=>{const i=R,x=S,d=$,p=j,A=M("v-md-editor"),V=T,F=H,N=J;return _(),D("div",le,[t(x,{"separator-class":"el-icon-arrow-right"},{default:o(()=>[t(i,{to:{name:"Home"}},{default:o(()=>[oe]),_:1}),t(i,null,{default:o(()=>[se]),_:1}),t(i,{to:{name:"Anime"}},{default:o(()=>[ne]),_:1}),t(i,null,{default:o(()=>[de]),_:1})]),_:1}),t(N,null,{default:o(()=>[t(F,{ref_key:"addform",ref:h,model:a(e).addData,"label-width":"80px",rules:a(e).rules},{default:o(()=>[t(p,{label:"\u6807\u9898",prop:"name"},{default:o(()=>[t(d,{modelValue:a(e).addData.name,"onUpdate:modelValue":l[0]||(l[0]=s=>a(e).addData.name=s),placeholder:"\u6807\u9898"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u56FE\u7247",prop:"img_url"},{default:o(()=>[t(d,{modelValue:a(e).addData.img_url,"onUpdate:modelValue":l[1]||(l[1]=s=>a(e).addData.img_url=s),placeholder:"htts://example1/1.png"},null,8,["modelValue"]),a(e).addData.img_url?(_(),D("img",{key:0,src:a(e).addData.img_url,class:"preview"},null,8,ue)):O("",!0)]),_:1}),t(p,{label:"\u7B80\u4ECB",prop:"generalize"},{default:o(()=>[t(d,{modelValue:a(e).addData.generalize,"onUpdate:modelValue":l[2]||(l[2]=s=>a(e).addData.generalize=s),class:"seat"},null,8,["modelValue"]),t(A,{modelValue:a(e).addData.generalize,"onUpdate:modelValue":l[3]||(l[3]=s=>a(e).addData.generalize=s),height:"400px"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u5185\u5BB9",prop:"content"},{default:o(()=>[u("div",re,[(_(!0),D(P,null,Q(a(e).addData.content,(s,n)=>(_(),D("div",{class:"tag",key:n},[u("div",me,[u("span",null,"\u7B2C"+W(n+1)+"\u96C6:",1),t(d,{modelValue:a(e).addData.content[n].title,"onUpdate:modelValue":r=>a(e).addData.content[n].title=r},null,8,["modelValue","onUpdate:modelValue"])]),u("div",ie,[ce,t(d,{modelValue:a(e).addData.content[n].episode,"onUpdate:modelValue":r=>a(e).addData.content[n].episode=r,type:"textarea",autosize:"true"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",pe,[_e,t(d,{modelValue:a(e).addData.content[n].ass,"onUpdate:modelValue":r=>a(e).addData.content[n].ass=r,type:"textarea",autosize:"true"},null,8,["modelValue","onUpdate:modelValue"])]),u("div",fe,[ge,t(d,{modelValue:a(e).addData.content[n].vtt,"onUpdate:modelValue":r=>a(e).addData.content[n].vtt=r,type:"textarea",autosize:"true"},null,8,["modelValue","onUpdate:modelValue"])]),t(V,{icon:a(Y),class:"delete",onClick:r=>B(s)},null,8,["icon","onClick"])]))),128)),y.value?(_(),I(d,{key:0,ref_key:"InputRef",ref:U,modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=s=>f.value=s),onKeyup:Z(z,["enter"]),onBlur:z},null,8,["modelValue","onKeyup"])):(_(),I(V,{key:1,class:"button-new-tag ml-1",size:"small",onClick:w},{default:o(()=>[ve]),_:1}))])]),_:1}),t(p,{label:"\u5B57\u5E55\u5B57\u4F53",prop:"fonts"},{default:o(()=>[t(d,{modelValue:a(e).addData.fonts,"onUpdate:modelValue":l[5]||(l[5]=s=>a(e).addData.fonts=s),type:"textarea",placeholder:"https://example1.com/1.ttf,https://example1.com/2.ttf",autosize:"true"},null,8,["modelValue"])]),_:1}),t(p,null,{default:o(()=>[t(V,{type:"primary",onClick:l[6]||(l[6]=s=>E(h.value)),loading:b.value},{default:o(()=>[Ve]),_:1},8,["loading"]),t(V,{onClick:l[7]||(l[7]=s=>h.value.resetFields())},{default:o(()=>[De]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}};var Be=ae(he,[["__scopeId","data-v-3cd821c3"]]);export{Be as default};
