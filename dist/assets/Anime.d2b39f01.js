import{J as K,K as I}from"./fetch.0f22f1f0.js";/* empty css                   *//* empty css                           *//* empty css                       *//* empty css                  *//* empty css                  *//* empty css                  *//* empty css                   *//* empty css                        *//* empty css                   */import{f as S,h as H,i as L,j as M,T as N,r as R,Y as j,Z as G,m as J,A as U,_ as $,ab as P,a0 as W,a1 as Y,a2 as Z,G as F,u as s,o as _,c as h,I as O,a as e,w as o,W as Q,a5 as X,H as ee,J as ae,K as r,L as te,a6 as oe,a7 as se,a8 as ne,R as c}from"./vendor.9ce32bbf.js";import{s as le}from"./functions.4004cecb.js";import"./index.483ec574.js";const re={key:1,class:"anime"},ie=r("\u9996\u9875"),ce=r("\u5A31\u4E50\u7BA1\u7406"),ue=r("\u52A8\u6F2B\u5217\u8868"),de=r("\u6DFB\u52A0\u52A8\u6F2B "),me={class:"img-box"},pe=r("\u4FEE\u6539"),_e=r("\u5220\u9664"),qe={setup(ge){const g=S(),f=H(),d=L(!0),a=M({list:[],total:0,reqData:{keyword:"",pagenum:1,pagesize:10},pagesizes:[1,5,10,20]}),n=async()=>{d.value=!0;const t=await K(a.reqData);t.status==200&&t.ok&&(a.list=t.data.data,a.total=t.data.total,d.value=!1)};n();const y=()=>{f.push({name:"AddAnime"})};N(g,()=>n());const w=t=>{f.push({name:"EditAnime",query:{id:t._id}})},b=async t=>{ne.confirm("\u786E\u8BA4\u5220\u9664\u52A8\u6F2B\uFF1F","\u8B66\u544A",{distinguishCancelAndClose:!0,confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88"}).then(async()=>{c({dangerouslyUseHTMLString:!0,message:"\u6B63\u5728\u5220\u9664\u4E2D",type:"warning",duration:0});const i=await I(t);i.status===200&&i.ok?(c.closeAll(),c.success("\u5220\u9664\u6210\u529F"),d.value=!0,n()):(c.closeAll(),c.error(i.data.message))}).catch(()=>{c.closeAll()})},C=t=>{a.reqData.pagenum=t,n()},k=t=>{a.reqData.pagesize=t,n()},v=()=>{a.reqData.keyword==""&&n()};return(t,i)=>{const A=R("router-view"),p=j,E=G,m=J,z=U,u=$,D=P,B=W,q=Y,x=Z,T=F;return s(g).meta.anime?(_(),h(A,{key:0})):(_(),O("div",re,[e(E,{"separator-class":"el-icon-arrow-right"},{default:o(()=>[e(p,{to:{name:"Home"}},{default:o(()=>[ie]),_:1}),e(p,null,{default:o(()=>[ce]),_:1}),e(p,null,{default:o(()=>[ue]),_:1})]),_:1}),e(x,null,{default:o(()=>[e(z,{placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",class:"input-with-select",modelValue:s(a).reqData.keyword,"onUpdate:modelValue":i[0]||(i[0]=l=>s(a).reqData.keyword=l),onKeyup:Q(n,["enter"]),onBlur:v,clearable:"",onClear:n},{append:o(()=>[e(m,{icon:s(X),onClick:n},null,8,["icon"])]),_:1},8,["modelValue","onKeyup"]),e(m,{type:"primary",class:"add",onClick:y},{default:o(()=>[de]),_:1}),ee((_(),h(B,{data:s(a).list,border:"",style:{width:"100%"}},{default:o(()=>[e(u,{label:"#",type:"index"}),e(u,{prop:"name",label:"\u6807\u9898"}),e(u,{prop:"img_url",label:"\u56FE\u7247"},{default:o(l=>[ae("div",me,[e(D,{src:l.row.img_url,fit:"contain"},null,8,["src"])])]),_:1}),e(u,{prop:"created_at",label:"\u521B\u5EFA\u65F6\u95F4"},{default:o(l=>[r(te(s(le)(l.row.created_at)),1)]),_:1}),e(u,{label:"\u64CD\u4F5C"},{default:o(l=>[e(m,{type:"primary",icon:s(oe),onClick:V=>w(l.row),size:"small"},{default:o(()=>[pe]),_:2},1032,["icon","onClick"]),e(m,{type:"danger",icon:s(se),onClick:V=>b(l.row._id),size:"small"},{default:o(()=>[_e]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[T,d.value]]),e(q,{onSizeChange:k,onCurrentChange:C,"current-page":s(a).reqData.pagenum,"page-sizes":s(a).pagesizes,"page-size":s(a).reqData.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:s(a).total},null,8,["current-page","page-sizes","page-size","total"])]),_:1})]))}}};export{qe as default};
