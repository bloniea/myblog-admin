import{M as K,N as L}from"./fetch.ddd67e48.js";/* empty css                   *//* empty css                           *//* empty css                     *//* empty css                  *//* empty css                   */import{i as f,h as M,f as j,j as H,k as T,Y as G,Z as J,A as O,B as P,r as Q,m as W,D as Y,a2 as Z,G as X,o as p,I as D,a,w as n,H as ee,c as B,u as l,ac as te,J as r,M as ae,N as le,L as oe,a7 as ne,W as se,K as m,P as de,Q as ie,ag as ue,R as re}from"./vendor.9ce32bbf.js";import{_ as me}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.83ef3299.js";const U=v=>(de("data-v-5d371872"),v=v(),ie(),v),ce={class:"edit-anime"},pe=m("\u9996\u9875"),_e=m("\u5A31\u4E50\u7BA1\u7406"),fe=m("\u52A8\u6F2B\u5217\u8868"),ge=m("\u4FEE\u6539\u52A8\u6F2B"),ve=["src"],Ve={class:"tags"},De={class:"tag-list"},he={class:"tag-list"},ye=U(()=>r("span",null,"\u89C6\u9891:",-1)),be={class:"tag-list"},ke=U(()=>r("span",null,"ass\u5B57\u5E55:",-1)),ze=m(" >"),Be={class:"tag-list"},Ue=U(()=>r("span",null,"vtt\u5B57\u5E55:",-1)),we=m(" >"),Ce=m(" \u6DFB\u52A0\u96C6\u6570 "),Ee=m("\u7ACB\u5373\u4FEE\u6539"),Ie=m("\u91CD\u7F6E"),Ae={setup(v){const h=f(),y=f(!1),A=M(),w=j(),b=f(!0),e=H({editData:{name:"",generalize:"",content:[],img_url:"",fonts:""},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898",trigger:"blur"}],generalize:[{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u5BB9",trigger:"change"}],content:[{required:!0,message:"\u8BF7\u8F93\u5165\u96C6\u6570",trigger:"blur"}],img_url:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",trigger:"blur"}]}}),C=f(),g=f(""),k=f(!1),x=()=>{k.value=!0,ue(()=>{C.value.input.focus()})},E=s=>{e.editData.content.splice(e.editData.content.indexOf(s),1)},z=s=>{s==""&&E(s)},I=()=>{if(g.value){const s={title:g.value,episode:"",ass:"",vtt:""};e.editData.content.push(s)}k.value=!1,g.value=""};T(()=>e.editData.fonts.toString()),(async()=>{b.value=!0;const s=w.query.id,t=await K(s);t.status==200&&t.ok&&(e.editData=t.data.data,e.editData.generalize=String(t.data.data.generalize)=="null"?"":t.data.data.generalize,b.value=!1)})();const F=async s=>{!s||s.validate(async t=>{if(t){y.value=!0;const c=await L(w.query.id,e.editData);c.status==200&&c.ok&&(A.push({name:"Anime"}),re.success("\u4FEE\u6539\u6210\u529F")),y.value=!1}})};return(s,t)=>{const c=G,q=J,u=O,_=P,N=Q("v-md-editor"),V=W,S=Y,$=Z,R=X;return p(),D("div",ce,[a(q,{"separator-class":"el-icon-arrow-right"},{default:n(()=>[a(c,{to:{name:"Home"}},{default:n(()=>[pe]),_:1}),a(c,null,{default:n(()=>[_e]),_:1}),a(c,{to:{name:"Anime"}},{default:n(()=>[fe]),_:1}),a(c,null,{default:n(()=>[ge]),_:1})]),_:1}),a($,null,{default:n(()=>[ee((p(),B(S,{ref_key:"editForm",ref:h,model:l(e).editData,"label-width":"80px",rules:l(e).rules},{default:n(()=>[a(_,{label:"\u6807\u9898",prop:"name"},{default:n(()=>[a(u,{modelValue:l(e).editData.name,"onUpdate:modelValue":t[0]||(t[0]=o=>l(e).editData.name=o),placeholder:"\u6807\u9898"},null,8,["modelValue"])]),_:1}),a(_,{label:"\u56FE\u7247",prop:"img_url"},{default:n(()=>[a(u,{modelValue:l(e).editData.img_url,"onUpdate:modelValue":t[1]||(t[1]=o=>l(e).editData.img_url=o),placeholder:"htts://example1/1.png"},null,8,["modelValue"]),l(e).editData.img_url?(p(),D("img",{key:0,src:l(e).editData.img_url,class:"preview"},null,8,ve)):te("",!0)]),_:1}),a(_,{label:"\u5185\u5BB9",prop:"generalize"},{default:n(()=>[a(u,{modelValue:l(e).editData.generalize,"onUpdate:modelValue":t[2]||(t[2]=o=>l(e).editData.generalize=o),class:"seat"},null,8,["modelValue"]),a(N,{modelValue:l(e).editData.generalize,"onUpdate:modelValue":t[3]||(t[3]=o=>l(e).editData.generalize=o),height:"400px"},null,8,["modelValue"])]),_:1}),a(_,{label:"\u5185\u5BB9",prop:"content"},{default:n(()=>[r("div",Ve,[(p(!0),D(ae,null,le(l(e).editData.content,(o,i)=>(p(),D("div",{class:"tag",key:i},[r("div",De,[r("span",null,"\u7B2C"+oe(i+1)+"\u96C6:",1),a(u,{modelValue:l(e).editData.content[i].title,"onUpdate:modelValue":d=>l(e).editData.content[i].title=d},null,8,["modelValue","onUpdate:modelValue"])]),r("div",he,[ye,a(u,{modelValue:l(e).editData.content[i].episode,"onUpdate:modelValue":d=>l(e).editData.content[i].episode=d,onBlur:d=>z(o),type:"textarea",autosize:"true"},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),r("div",be,[ke,a(u,{modelValue:l(e).editData.content[i].ass,"onUpdate:modelValue":d=>l(e).editData.content[i].ass=d,onBlur:d=>z(o),type:"textarea",autosize:"true"},{default:n(()=>[ze]),_:2},1032,["modelValue","onUpdate:modelValue","onBlur"])]),r("div",Be,[Ue,a(u,{modelValue:l(e).editData.content[i].vtt,"onUpdate:modelValue":d=>l(e).editData.content[i].vtt=d,onBlur:d=>z(o),type:"textarea",autosize:"true"},{default:n(()=>[we]),_:2},1032,["modelValue","onUpdate:modelValue","onBlur"])]),a(V,{icon:l(ne),class:"delete",onClick:d=>E(o)},null,8,["icon","onClick"])]))),128)),k.value?(p(),B(u,{key:0,ref_key:"InputRef",ref:C,modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=o=>g.value=o),size:"small",onKeyup:se(I,["enter"]),onBlur:I},null,8,["modelValue","onKeyup"])):(p(),B(V,{key:1,class:"button-new-tag ml-1",size:"small",onClick:x},{default:n(()=>[Ce]),_:1}))])]),_:1}),a(_,{label:"\u5B57\u5E55\u5B57\u4F53",prop:"fonts"},{default:n(()=>[a(u,{modelValue:l(e).editData.fonts,"onUpdate:modelValue":t[5]||(t[5]=o=>l(e).editData.fonts=o),type:"textarea",placeholder:"https://example1.com/1.ttf,https://example1.com/2.ttf",autosize:"true"},null,8,["modelValue"])]),_:1}),a(_,null,{default:n(()=>[a(V,{type:"primary",onClick:t[6]||(t[6]=o=>F(h.value)),loading:y.value},{default:n(()=>[Ee]),_:1},8,["loading"]),a(V,{onClick:t[7]||(t[7]=o=>h.value.resetFields())},{default:n(()=>[Ie]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[R,b.value]])]),_:1})])}}};var je=me(Ae,[["__scopeId","data-v-5d371872"]]);export{je as default};
