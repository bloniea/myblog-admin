import{j as K,k as y,i as M,X as H,Y as P,q as j,F as G,Z as J,$ as O,a0 as W,a1 as X,G as Y,ab as Z,H as Q,I as ee,J as ae,o as E,L as le,a as t,w as o,u as e,W as te,a4 as oe,K as se,c as de,N as r,O as R,a5 as ne,a6 as ie,M as b,ac as k,f as i,a7 as re}from"./vendor.0ff88f1f.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                     *//* empty css                  *//* empty css                           *//* empty css                      *//* empty css                  *//* empty css                  */import{s as me}from"./functions.2b6d8712.js";import{_ as ue}from"./plugin-vue_export-helper.21dcd24c.js";const ce={class:"label"},_e=r("\u9996\u9875"),pe=r("\u6807\u7B7E\u7BA1\u7406"),be=r("\u6807\u7B7E\u5217\u8868"),fe=r("\u6DFB\u52A0\u6807\u7B7E"),ge=r("\u4FEE\u6539"),Ve=r("\u5220\u9664"),qe={class:"color"},ye={class:"dialog-footer"},Re=r("\u53D6 \u6D88"),ve=r("\u786E \u5B9A"),Ce={class:"color"},xe={class:"dialog-footer"},we=r("\u53D6 \u6D88"),Ee=r("\u786E \u5B9A"),ke={setup(he){const V=K(!0),n=y({list:[],req:{query:"",pagenum:1,pagesize:10},pagesizes:[1,5,10,20],total:0}),{proxy:c}=M(),m=y({btn:!1}),_=async()=>{V.value=!0;const{data:d}=await c.$axios.get("/adminApi/labels",{params:n.req});if(d.meta.status!==200)return i.error(d.meta.msg);V.value=!1,n.list=d.data.data,n.total=d.data.total};_();const v=()=>{},h=d=>{n.req.pagesize=d,_()},z=d=>{n.req.pagenum=d,_()},$=()=>{_()},a=y({addVisible:!1,addReq:{label_name:"",des:"",color:"#F065A6"},rules:{label_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0",trigger:"blur"},{min:2,max:16,message:"\u957F\u5EA6\u5728 2 \u5230 16 \u4E2A\u5B57\u7B26",trigger:"blur"}],color:[{required:!0,message:"\u8BF7\u8F93\u5165\u989C\u8272\u503C",trigger:"blur"},{min:4,max:7,message:"\u957F\u5EA6\u5728 4\u5230 7 \u4E2A\u5B57\u7B26",trigger:"blur"}]},editVisible:!1,editId:0,editReq:{label_name:"",des:"",color:""}}),B=()=>{c.$refs.addform.validate(async d=>{if(d){m.btn=!0;const{data:l}=await c.$axios.post("/adminApi/labels",a.addReq);if(l.meta.status!==200)return m.btn=!1,i.error(l.meta.msg);i.success(l.meta.msg),c.$refs.addform.resetFields(),a.addVisible=!1,m.btn=!1,_()}})},U=d=>{a.editId=d.id,a.editReq.label_name=d.label_name,a.editReq.des=d.des,a.editReq.color=d.color,a.editVisible=!0},A=()=>{c.$refs.editform.validate(async d=>{if(d){m.btn=!0;const{data:l}=await c.$axios.put(`/adminApi/labels/${a.editId}`,a.editReq);if(l.meta.status!==200)return m.btn=!1,i.error(l.meta.msg);i.success(l.meta.msg),a.editVisible=!1,m.btn=!1,_()}})},I=async d=>{re.confirm("\u786E\u8BA4\u5220\u9664\u6807\u7B7E\uFF1F","\u8B66\u544A",{distinguishCancelAndClose:!0,confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88"}).then(async()=>{i({dangerouslyUseHTMLString:!0,message:"\u6B63\u5728\u5220\u9664\u4E2D",type:"warning",duration:0});const{data:l}=await c.$axios.delete(`/adminApi/labels/${d}`);if(l.meta.status!==200)return i.error(l.meta.msg);i.closeAll(),i.success(l.meta.msg),_()}).catch(()=>{i.closeAll(),i.error("\u60A8\u53D6\u6D88\u4E86\u64CD\u4F5C")})};return(d,l)=>{const q=H,L=P,u=j,f=G,g=J,T=O,F=W,N=X,p=Y,C=Z,x=Q,w=ee,S=ae;return E(),le("div",ce,[t(L,{"separator-class":"el-icon-arrow-right"},{default:o(()=>[t(q,{to:{name:"Home"}},{default:o(()=>[_e]),_:1}),t(q,null,{default:o(()=>[pe]),_:1}),t(q,null,{default:o(()=>[be]),_:1})]),_:1}),t(N,null,{default:o(()=>[t(f,{placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",class:"input-with-select",modelValue:e(n).req.query,"onUpdate:modelValue":l[0]||(l[0]=s=>e(n).req.query=s),onKeyup:te(v,["enter"]),onChange:$},{append:o(()=>[t(u,{icon:e(oe),onClick:v},null,8,["icon"])]),_:1},8,["modelValue","onKeyup"]),t(u,{type:"primary",class:"add",onClick:l[1]||(l[1]=s=>e(a).addVisible=!0)},{default:o(()=>[fe]),_:1}),se((E(),de(T,{data:e(n).list,border:"",style:{width:"100%"}},{default:o(()=>[t(g,{label:"#",type:"index"}),t(g,{prop:"label_name",label:"\u6807\u7B7E\u540D\u5B57"}),t(g,{prop:"created_at",label:"\u521B\u5EFA\u65F6\u95F4"},{default:o(s=>[r(R(e(me)(s.row.created_at)),1)]),_:1}),t(g,{label:"\u64CD\u4F5C"},{default:o(s=>[t(u,{type:"primary",icon:e(ne),onClick:D=>U(s.row),size:"small"},{default:o(()=>[ge]),_:2},1032,["icon","onClick"]),t(u,{type:"danger",icon:e(ie),onClick:D=>I(s.row.id),size:"small"},{default:o(()=>[Ve]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[S,V.value]]),t(F,{onSizeChange:h,onCurrentChange:z,"current-page":e(n).req.pagenum,"page-sizes":e(n).pagesizes,"page-size":e(n).req.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e(n).total},null,8,["current-page","page-sizes","page-size","total"])]),_:1}),t(w,{title:"\u6DFB\u52A0\u6807\u7B7E",modelValue:e(a).addVisible,"onUpdate:modelValue":l[6]||(l[6]=s=>e(a).addVisible=s),width:"30%"},{footer:o(()=>[b("span",ye,[t(u,{onClick:l[5]||(l[5]=s=>e(a).addVisible=!1)},{default:o(()=>[Re]),_:1}),t(u,{type:"primary",onClick:B,loading:e(m).btn},{default:o(()=>[ve]),_:1},8,["loading"])])]),default:o(()=>[t(x,{ref:"addform",model:e(a).addReq,"label-width":"80px",rules:e(a).rules},{default:o(()=>[t(p,{label:"\u6807\u7B7E\u540D\u5B57",prop:"label_name"},{default:o(()=>[t(f,{modelValue:e(a).addReq.label_name,"onUpdate:modelValue":l[2]||(l[2]=s=>e(a).addReq.label_name=s)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u989C\u8272",prop:"color"},{default:o(()=>[b("div",qe,[t(C,{modelValue:e(a).addReq.color,"onUpdate:modelValue":l[3]||(l[3]=s=>e(a).addReq.color=s)},null,8,["modelValue"]),b("div",{class:"name",style:k("color:"+e(a).addReq.color+";")},R(e(a).addReq.label_name?e(a).addReq.label_name:"\u9884\u89C8"),5)])]),_:1}),t(p,{label:"\u63CF\u8FF0"},{default:o(()=>[t(f,{modelValue:e(a).addReq.des,"onUpdate:modelValue":l[4]||(l[4]=s=>e(a).addReq.des=s),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(w,{title:"\u6DFB\u52A0\u6807\u7B7E",modelValue:e(a).editVisible,"onUpdate:modelValue":l[11]||(l[11]=s=>e(a).editVisible=s),width:"30%"},{footer:o(()=>[b("span",xe,[t(u,{onClick:l[10]||(l[10]=s=>e(a).editVisible=!1)},{default:o(()=>[we]),_:1}),t(u,{type:"primary",onClick:A,loading:e(m).btn},{default:o(()=>[Ee]),_:1},8,["loading"])])]),default:o(()=>[t(x,{ref:"editform",model:e(a).editReq,"label-width":"80px",rules:e(a).rules},{default:o(()=>[t(p,{label:"\u6807\u7B7E\u540D\u5B57",prop:"label_name"},{default:o(()=>[t(f,{modelValue:e(a).editReq.label_name,"onUpdate:modelValue":l[7]||(l[7]=s=>e(a).editReq.label_name=s)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u989C\u8272",prop:"color"},{default:o(()=>[b("div",Ce,[t(C,{modelValue:e(a).editReq.color,"onUpdate:modelValue":l[8]||(l[8]=s=>e(a).editReq.color=s)},null,8,["modelValue"]),b("div",{class:"name",style:k("color:"+e(a).editReq.color+";")},R(e(a).editReq.label_name?e(a).editReq.label_name:"\u9884\u89C8"),5)])]),_:1}),t(p,{label:"\u63CF\u8FF0"},{default:o(()=>[t(f,{modelValue:e(a).editReq.des,"onUpdate:modelValue":l[9]||(l[9]=s=>e(a).editReq.des=s),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};var Ke=ue(ke,[["__scopeId","data-v-29b2e4e6"]]);export{Ke as default};
