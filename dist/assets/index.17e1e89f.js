import{j as I,p as L,k as v,i as U,X as N,Y as S,F as h,G as D,a2 as H,a3 as M,r as j,q as z,H as G,a1 as J,J as K,o as d,L as g,a as l,w as o,K as O,c as V,u as r,M as P,P as w,Q as k,aa as Q,N as u,f as p}from"./vendor.0ff88f1f.js";/* empty css                   *//* empty css                           *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                  */import{_ as R}from"./plugin-vue_export-helper.21dcd24c.js";const T={class:"addArticle"},X=u("\u9996\u9875"),Y=u("\u6587\u7AE0\u7BA1\u7406"),W=u("\u6587\u7AE0\u5217\u8868"),Z=u("\u6DFB\u52A0\u6587\u7AE0"),ee={class:"category_label"},te=["src"],le=u("\u7ACB\u5373\u521B\u5EFA"),ae=u("\u91CD\u7F6E"),oe=u("\u53D6\u6D88"),re={setup(se){const m=I(!0),x=L(),c=v({btn:!1}),e=v({req:{title:"",category_id:"",label_ids:"",img_url:"",content:"",img_source:""},category_id:[],label_ids:[],categories:[],labels:[],rules:{title:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898",trigger:"blur"}],category_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B",trigger:"blur"}],img_url:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",trigger:"blur"}],img_source:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FE\u7247\u6765\u6E90",trigger:"blur"}],content:[{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u5BB9",trigger:"blur"}]}});v({Authorization:window.sessionStorage.getItem("token")?window.sessionStorage.getItem("token"):""});const{proxy:_}=U();(async()=>{m.value=!0;const{data:s}=await _.$axios.get("/adminApi/categories");if(s.meta.status!==200)return p.error(s.meta.msg);e.categories=s.data,m.value=!1})(),(async()=>{m.value=!0;const{data:s}=await _.$axios.get("/adminApi/labels");if(s.meta.status!==200)return p.error(s.meta.msg);e.labels=s.data,m.value=!1})();const E=s=>{e.req.category_id=e.category_id.toString(),e.req.label_ids=e.label_ids.toString(),_.$refs[s].validate(async a=>{if(a){c.btn=!0;const{data:n}=await _.$axios.post("/adminApi/articles",e.req);if(n.meta.status!==200)return c.btn=!1,p.error(n.meta.msg);_.$refs[s].resetFields(),p.success(n.meta.msg),c.btn=!1,x.push({name:"Articles"})}})};return(s,a)=>{const n=N,A=S,b=h,i=D,q=H,y=M,C=j("v-md-editor"),f=z,F=G,$=J,B=K;return d(),g("div",T,[l(A,{"separator-class":"el-icon-arrow-right"},{default:o(()=>[l(n,{to:{name:"Home"}},{default:o(()=>[X]),_:1}),l(n,null,{default:o(()=>[Y]),_:1}),l(n,{to:{name:"Articles"}},{default:o(()=>[W]),_:1}),l(n,null,{default:o(()=>[Z]),_:1})]),_:1}),l($,null,{default:o(()=>[O((d(),V(F,{ref:"Addform",model:r(e).req,"label-width":"80px",rules:r(e).rules},{default:o(()=>[l(i,{label:"\u6807\u9898",prop:"title"},{default:o(()=>[l(b,{modelValue:r(e).req.title,"onUpdate:modelValue":a[0]||(a[0]=t=>r(e).req.title=t)},null,8,["modelValue"])]),_:1}),P("div",ee,[l(i,{label:"\u5206\u7C7B",prop:"category_id"},{default:o(()=>[l(y,{modelValue:r(e).category_id,"onUpdate:modelValue":a[1]||(a[1]=t=>r(e).category_id=t),placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B"},{default:o(()=>[(d(!0),g(w,null,k(r(e).categories,t=>(d(),V(q,{key:t.id,label:t.cat_name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"\u6807\u7B7E"},{default:o(()=>[l(y,{modelValue:r(e).label_ids,"onUpdate:modelValue":a[2]||(a[2]=t=>r(e).label_ids=t),multiple:"",placeholder:"\u8BF7\u9009\u62E9\u6807\u7B7E"},{default:o(()=>[(d(!0),g(w,null,k(r(e).labels,t=>(d(),V(q,{key:t.id,label:t.label_name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),l(i,{label:"\u56FE\u7247\u6765\u6E90",prop:"img_source"},{default:o(()=>[l(b,{modelValue:r(e).req.img_source,"onUpdate:modelValue":a[3]||(a[3]=t=>r(e).req.img_source=t)},null,8,["modelValue"])]),_:1}),l(i,{label:"\u56FE\u7247\u5730\u5740",prop:"img_url"},{default:o(()=>[l(b,{modelValue:r(e).req.img_url,"onUpdate:modelValue":a[4]||(a[4]=t=>r(e).req.img_url=t)},null,8,["modelValue"]),r(e).req.img_url?(d(),g("img",{key:0,src:r(e).req.img_url,class:"preview"},null,8,te)):Q("",!0)]),_:1}),l(i,{label:"\u5185\u5BB9",prop:"content"},{default:o(()=>[l(C,{modelValue:r(e).req.content,"onUpdate:modelValue":a[5]||(a[5]=t=>r(e).req.content=t),height:"400px"},null,8,["modelValue"])]),_:1}),l(i,null,{default:o(()=>[l(f,{type:"primary",onClick:a[6]||(a[6]=t=>E("Addform")),loading:r(c).btn},{default:o(()=>[le]),_:1},8,["loading"]),l(f,{onClick:a[7]||(a[7]=t=>s.resetForm("Addform"))},{default:o(()=>[ae]),_:1}),l(f,{onClick:a[8]||(a[8]=t=>s.resetForm("Addform"))},{default:o(()=>[oe]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[B,m.value]])]),_:1})])}}};var fe=R(re,[["__scopeId","data-v-277fcbe8"]]);export{fe as default};
